function consultarDatabases(){$.ajax({method:"GET",dataType:"JSON",url:"/CadDinamico/SelecionarDatabases",sucess:function(data){$("#selDatabases > option").remove();fillDropDownDatabase("#selDatabases",data);consultarSchemas()},error:function(data){alert("Houve um erro ao consultar as databases.")},complete:(jqXHR)=>{if(jqXHR.readyState===4){$("#selDatabases > option").remove();fillDropDownDatabase("#selDatabases",jqXHR.responseJSON);consultarSchemas()}}})}function consultarTabelas(){$.ajax({method:"GET",dataType:"JSON",url:"/CadDinamico/SelecionarTabelas?database="+$("#selDatabases")[0].value+"&schema="+$("#selSchemas")[0].value,sucess:function(data){$("#selTabelas > option").remove();fillDropDownDatabase("#selTabelas",data)},error:function(data){alert("Houve um erro ao consultar as tabelas.")},complete:(jqXHR)=>{if(jqXHR.readyState===4){$("#selTabelas > option").remove();fillDropDownDatabase("#selTabelas",jqXHR.responseJSON);consultarColunas()}}})}function consultarColunas(){if($("#selTabelas")[0].value!==''){$.ajax({method:"GET",dataType:"JSON",url:"/CadDinamico/SelecionarColunas?database="+$("#selDatabases")[0].value+"&schema="+$("#selSchemas")[0].value+"&tabela="+$("#selTabelas")[0].value,sucess:function(data){$("#tblColunas > tbody tr").remove();$("#tblColunas")[0].hidden=!1;$.each(data,function(i,coluna){$("#tblColunas > tbody").append('<tr><td>'+coluna.name+'</td><td><input type="checkbox" checked="checked" /></td></tr>')});awaitLoad(!1)},error:function(data){$("#tblColunas")[0].hidden=!0;awaitLoad(!1);alert("Houve um erro ao consultar as colunas.")},complete:(jqXHR)=>{if(jqXHR.readyState===4){$("#tblColunas > tbody tr").remove();$("#tblColunas")[0].hidden=!1;$.each(jqXHR.responseJSON,function(i,coluna){$("#tblColunas > tbody").append('<tr><td>'+coluna.name+'</td><td><input type="checkbox" checked="checked" /></td></tr>')})}awaitLoad(!1)},beforeSend:()=>{awaitLoad(!0)}})}else{$("#tblColunas > tbody tr").remove()}}function awaitLoad(enabled){$("#selDatabases")[0].disabled=enabled;$("#selSchemas")[0].disabled=enabled;$("#selTabelas")[0].disabled=enabled}function consultarSchemas(){$.ajax({method:"GET",dataType:"JSON",url:"/CadDinamico/SelecionarSchemas?database="+$("#selDatabases")[0].value,sucess:function(data){$("#selSchemas > option").remove();fillDropDownDatabase("#selSchemas",data)},error:function(data){alert("Houve um erro ao consultar os schemas.")},complete:(jqXHR)=>{if(jqXHR.readyState===4){$("#selSchemas > option").remove();fillDropDownDatabase("#selSchemas",jqXHR.responseJSON);consultarTabelas()}}})}$(document).ready(()=>{consultarDatabases();$("#selDatabases").change(()=>{$("#selSchemas > option").remove();consultarSchemas()});$("#selSchemas").change(()=>{$("#selTabelas > option").remove();consultarTabelas()});$("#selTabelas").change(()=>{$("#tblColunas > tbody tr").remove();consultarColunas()})});function fillDropDownDatabase(select,data){$.each(data,function(i,dado){$(select).append('<option value="'+dado.name+'">'+dado.name+'</option>')})}